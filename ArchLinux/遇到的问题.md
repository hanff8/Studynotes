## 1. telegram 模糊，且在hidpi存在缩放问题
https://wiki.archlinux.org/title/Telegram_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)
https://wiki.archlinuxcn.org/wiki/%E6%A1%8C%E9%9D%A2%E9%A1%B9

根据 **27**点将desktop entry 的启动参数修改成no-scaling。此时在启动菜单中会出现两个telegram，编辑/usr/share/applications下的telegramdesktop-entry

```shell
sudo vim /usr/share/applications/telegramdesktop.desktop
```

在[desktop entry] 下面的最后一行，加上

```shell
[Desktop Entry]
...
...
NoDisplay=true

[Desktop Action Quit]
```

如果有自启动，也需要修改

```shell
ln -s ~/.local/share/applications/[新建的app.desktop] ~/.config/autostart/
```


**或者直接改用Wayland ，** 

然后再删去原有的autostart下面的softlink(telegram-desktop.desktop)即可

## 2. 用户目录是中文，不方便终端目录操作

https://wiki.archlinux.org/title/XDG_user_directories_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)

使用 `LC_ALL=C xdg-user-dirs-update --force` 强制生成英文目录，并使用如下命令将原目录内容转移
```shell
mv 下载/* Downloads/
mv 图片/* Pictures/
mv 视频/* Videos/
mv 文档/* Documents/
mv 音乐/* Music/

rm -rf 下载 图片 视频 文档 音乐
```

## 3. 切换wayland桌面之后，关机慢

使用`yay`安装`sddm-git`包即可解决,详细信息见[issue](https://github.com/sddm/sddm/issues/1476)

## 4. MagicBookV14/MateBook14s speaker与headphone问题

目前只有workaround,且magicbook 的办法还不能完全解决
[github issue](https://github.com/thesofproject/linux/issues/3350)

## 5. telegram悬浮窗点击闪退
貌似是opengl加速的问题，要么关闭telegram->Settings->Advanced->Enable OpenGL rendering for media.
要么，给telegram添加启动参数
```shell
env __GLX_VENDOR_LIBRARY_NAME=mesa MESA_LOADER_DRIVER_OVERRIDE=wlr GALLIUM_DRIVER=wlr
```
## 6. idea fcitx 输入偏移
下载对应版本的包
[Releases · AlanSune/JetBrainsRuntime-for-Linux-x64](https://github.com/AlanSune/JetBrainsRuntime-for-Linux-x64/releases)

由于新版idea不支持更改jbr版本了，我们可以将原来的jbr目录下的文件删除，然后添加指向我们下载解压后的包的软链。

arch中aur的idea默认安装在/opt/{SoftwareName}下面，找到jbr包删除，并添加软链接即可。

```bash
# /opt/{idea software name}/jbr/
sudo ln -sf ~/downloads/jbr/* .
```
## 7. wayland下telegram的fcitx输入法打字快时容易卡顿
目前的wayland下的fcitx5还有一堆问题亟待解决，具体可以看这篇博客：
https://fcitx-im.org/wiki/Using_Fcitx_5_on_Wayland
https://www.csslayer.info/wordpress/fcitx-dev/chrome-state-of-input-method-on-wayland/
解决办法还是添加参数让telegram通过xwayland运行在x11环境中
```shell
# 在desktop文件中为telegram-desktop添加启动参数
vim ~/.local/share/applications/

Exec=env QT_QPA_PLATFORM=xcb telegram-desktop -- %u

```
